const l=document,w="https://formsubmit.co/ajax/wilsondelcanto.redes@gmail.com";function x(){console.log("Inicializando formulario de contacto...");const e=l.querySelector("#contact-form");if(!e){console.log("Formulario de contacto no encontrado");return}l.querySelectorAll("#contact-form [required]").forEach(t=>{const r=t;if(l.getElementById(`error-${r.name}`))return;const a=l.createElement("span");a.id=`error-${r.name}`,a.textContent=r.title||"Este campo es requerido",a.classList.add("contact-form-error","hidden","text-red-400","text-sm","mt-1","block"),r.parentElement?.appendChild(a)}),l.addEventListener("keyup",t=>{t.target&&t.target.matches("#contact-form [required]")&&y(t.target)}),e.addEventListener("submit",L),console.log("Formulario inicializado correctamente")}function y(e){const o=("pattern"in e?e.pattern:"")||e.dataset.pattern,t=l.getElementById(`error-${e.name}`);if(!t)return!0;if(o&&e.value!=="")if(new RegExp(o).exec(e.value))p(e,t);else return v(e,t),!1;if(e.hasAttribute("required")){if(e.value.trim()==="")return v(e,t),!1;p(e,t)}return!0}function v(e,o){e.classList.add("border-red-500","focus:border-red-500","focus:ring-red-500/20"),e.classList.remove("border-gray-600","focus:border-purple-500","focus:ring-purple-500/20","focus:border-cyan-500","focus:ring-cyan-500/20"),o.classList.remove("hidden")}function p(e,o){e.classList.remove("border-red-500","focus:border-red-500","focus:ring-red-500/20"),e.classList.add("border-gray-600"),e.name==="email"||e.name==="message"?e.classList.add("focus:border-cyan-500","focus:ring-cyan-500/20"):e.classList.add("focus:border-purple-500","focus:ring-purple-500/20"),o.classList.add("hidden")}async function L(e){e.preventDefault(),console.log("Procesando env√≠o del formulario...");const o=e.target,t=o.querySelectorAll("[required]"),r=o.querySelector('button[type="submit"]'),c=r.querySelector(".button-text"),a=r.querySelector(".loading-icon");let d=!0;if(t.forEach(n=>{y(n)||(d=!1)}),!d){f("error","‚ö†Ô∏è Por favor, corrige los errores en el formulario antes de enviar.");return}h(r,c,a,!0);try{const n=new FormData(o);n.append("_subject","Nuevo mensaje desde el portfolio de Wilson"),n.append("_captcha","false"),n.append("_template","table"),console.log("Enviando datos a FormSubmit...");const i=await fetch(w,{method:"POST",body:n}),u=await i.json();if(console.log("Respuesta de FormSubmit:",u),!i.ok)throw new Error(`Error HTTP: ${i.status}`);f("success","¬°Mensaje enviado correctamente! üöÄ Te responder√© pronto."),o.reset(),t.forEach(m=>{const s=m,g=l.getElementById(`error-${s.name}`);g&&p(s,g)})}catch(n){console.error("Error al enviar formulario:",n),f("error","‚ùå Hubo un problema al enviar el mensaje. Por favor, intenta nuevamente o cont√°ctame por WhatsApp.")}finally{h(r,c,a,!1)}}function h(e,o,t,r){r?(e.disabled=!0,o.classList.add("hidden"),t.classList.remove("hidden"),e.classList.add("opacity-75")):(e.disabled=!1,o.classList.remove("hidden"),o.textContent="Enviar Mensaje",t.classList.add("hidden"),e.classList.remove("opacity-75"))}function f(e,o){let t=document.getElementById("toast-container");t||(t=document.createElement("div"),t.id="toast-container",t.className="fixed top-4 right-4 z-50 flex flex-col gap-2 pointer-events-none max-w-sm",document.body.appendChild(t));const r=document.createElement("div"),c={success:{bgColor:"bg-green-500/10 border-green-500/20",icon:`<svg class="w-5 h-5 text-green-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>`,textColor:"text-green-400"},error:{bgColor:"bg-red-500/10 border-red-500/20",icon:`<svg class="w-5 h-5 text-red-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>`,textColor:"text-red-400"},info:{bgColor:"bg-blue-500/10 border-blue-500/20",icon:`<svg class="w-5 h-5 text-blue-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>`,textColor:"text-blue-400"}},a=c[e]||c.info;r.className=`
        pointer-events-auto transform transition-all duration-500 ease-out
        bg-gray-900/95 backdrop-blur-md border ${a.bgColor}
        rounded-xl px-4 py-3 shadow-2xl min-w-[320px]
        translate-x-full opacity-0 hover:scale-105
        group cursor-pointer relative overflow-hidden
    `,r.innerHTML=`
        <div class="flex items-start gap-3">
            <div class="mt-0.5">
                ${a.icon}
            </div>
            <div class="flex-1 min-w-0">
                <p class="text-white font-medium text-sm leading-relaxed pr-2">
                    ${o}
                </p>
            </div>
            <button onclick="removeToast(this)" 
                    class="text-gray-500 hover:text-white transition-colors duration-200 flex-shrink-0 opacity-0 group-hover:opacity-100 ml-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
        <div class="absolute bottom-0 left-0 h-1 bg-gradient-to-r from-purple-500 to-cyan-500 rounded-b-xl transition-all duration-5000 ease-linear progress-bar" style="width: 100%"></div>
    `,r.id=`toast-${Date.now()}`,t.appendChild(r),requestAnimationFrame(()=>{r.classList.remove("translate-x-full","opacity-0"),r.classList.add("translate-x-0","opacity-100");const s=r.querySelector(".progress-bar");setTimeout(()=>{s&&(s.style.width="0%")},100)});let d=!1,n;const i=()=>{d||(n=setTimeout(()=>{b(r)},5e3))},u=()=>{d=!0,n&&clearTimeout(n);const s=r.querySelector(".progress-bar");s&&(s.style.animationPlayState="paused")},m=()=>{d=!1;const s=r.querySelector(".progress-bar");s&&(s.style.animationPlayState="running"),i()};r.addEventListener("mouseenter",u),r.addEventListener("mouseleave",m),r.addEventListener("click",()=>b(r)),i()}function b(e){e.parentNode&&(e.classList.add("translate-x-full","opacity-0","scale-95"),setTimeout(()=>{e.parentNode&&e.remove();const o=document.getElementById("toast-container");o&&o.children.length===0&&o.remove()},300))}document.addEventListener("DOMContentLoaded",x);document.readyState!=="loading"&&x();
